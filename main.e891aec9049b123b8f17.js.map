{"version":3,"sources":["webpack:///./template/photoCardTemplate.hbs","webpack:///./js/refs/index.js","webpack:///./js/notification/index.js","webpack:///./js/insertingMarkup/index.js","webpack:///./js/api/apiService.js","webpack:///./js/settings/index.js","webpack:///./js/render/index.js","webpack:///./js/api/pagination.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","observerRef","document","querySelector","galleryRef","inputRef","defaults","delay","styling","require","alert","info","error","success","errorNotif","notification","refs","arrImages","length","markup","photoCardTemplate","insertAdjacentHTML","innerHTML","BASE_URL","API_KEY","api","fetchImages","page","searchKey","fetch","then","rawData","ok","json","catch","currentInputValue","insertMarkup","markupRender","clearMarkup","ImagePagination","this","imagesArr","currentPage","loadMore","bind","results","hits","addImages","newImages","imgApi","pageReset","console","emptyNotif","loadMoreNotif","image","addEventListener","debounce","value","observerHandler","lodash","entries","isIntersecting","IntersectionObserver","rootMargin","threshold","observe"],"mappings":"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","file":"main.e891aec9049b123b8f17.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <li class=\\\"gallery-item\\\">\\r\\n        <div class=\\\"photo-card\\\">\\r\\n        <img src= \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":18},\"end\":{\"line\":5,\"column\":36}}}) : helper)))\n    + \" alt= \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"user\") || (depth0 != null ? lookupProperty(depth0,\"user\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"user\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":42},\"end\":{\"line\":5,\"column\":52}}}) : helper)))\n    + \" class=\\\"photo-img\\\" />\\r\\n            <div class=\\\"stats\\\">\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":16},\"end\":{\"line\":9,\"column\":27}}}) : helper)))\n    + \"\\r\\n                </p>\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":16},\"end\":{\"line\":13,\"column\":27}}}) : helper)))\n    + \"\\r\\n                </p>\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":16},\"end\":{\"line\":17,\"column\":30}}}) : helper)))\n    + \"\\r\\n                </p>\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":16},\"end\":{\"line\":21,\"column\":31}}}) : helper)))\n    + \"\\r\\n                </p>\\r\\n            </div>\\r\\n        </div>\\r\\n    </li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","export default {\r\n    // loadMoreBtnRef: document.querySelector('.load-more-btn'),\r\n    observerRef: document.querySelector('.last-item-observer'),\r\n    galleryRef: document.querySelector('.gallery'),\r\n    inputRef: document.querySelector('input[name=\"query\"]'),\r\n}","import '@pnotify/mobile/dist/PNotifyMobile.css';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\nimport '@pnotify/core/dist/Material.css';\r\nimport { defaults } from '@pnotify/core';\r\n\r\ndefaults.delay = 3000;\r\ndefaults.styling = 'material';\r\n\r\nconst { alert, info, success, error } = require('@pnotify/core');\r\n\r\n  function errorNotif() {\r\n    error('No such images');\r\n  }\r\n  function succsessNotif() {\r\n    success('We find it!!!');\r\n  }\r\n  function emptyNotif() {\r\n      alert('Enter a value to search, please!');\r\n  }\r\n  function loadMoreNotif() {\r\n    info(\"Hey catch more images! :)\");\r\n  }\r\n  export default {\r\n    errorNotif,\r\n    succsessNotif,\r\n    emptyNotif,\r\n    loadMoreNotif,\r\n  };","import photoCardTemplate from '../../template/photoCardTemplate.hbs';\r\nimport notification from '../notification';\r\nimport refs from '../refs';\r\nconst {errorNotif} = notification;\r\nconst {galleryRef} = refs;\r\nexport default {\r\n     insertMarkup(arrImages) {\r\n        // console.log(arrImages);\r\n        if(arrImages.length === 0) {return errorNotif();}\r\n        \r\n        let markup = photoCardTemplate(arrImages);\r\n        return refs.galleryRef.insertAdjacentHTML('afterbegin', markup);\r\n    },\r\n     clearMarkup(){\r\n        galleryRef.innerHTML = '';\r\n    }\r\n}\r\n\r\n","import notification from '../notification';\r\nimport setting from '../settings/index.js';\r\n\r\nconst {errorNotif} = notification;\r\nconst { BASE_URL, API_KEY } = setting;\r\n\r\nconst api = {\r\n  fetchImages(page = '', searchKey = '') {\r\n    const url = `${BASE_URL}/api/?image_type=photo&orientation=horizontal&q=${searchKey}&page=${page}&per_page=12&key=${API_KEY}`;\r\n\r\n    return fetch(url).then(rawData => {if(rawData.ok)  return rawData.json()}).catch(() => errorNotif());\r\n  },\r\n};\r\n\r\nexport default api;","export default {\r\n    BASE_URL: 'https://pixabay.com',\r\n    API_KEY: '20725860-716e2490a7269985c8ea1b39a',\r\n};","import refs from '../refs';\r\nimport debounce from 'lodash.debounce';\r\nimport lodash from 'lodash';\r\nimport ImagePagination from '../api/pagination';\r\nimport notification from '../notification';\r\n\r\nconst {  emptyNotif, loadMoreNotif} = notification;\r\nconst { observerRef, inputRef } = refs;\r\nconst image = new ImagePagination();\r\nlet currentInputValue;\r\n\r\ninputRef.addEventListener('input', debounce(requestImage, 1000));\r\n\r\nconst options = {\r\n    rootMargin: '400px',\r\n    threshold: 0.5,\r\n  };\r\n\r\nconst observerHandler = lodash.debounce(entries => {\r\n    const { isIntersecting } = entries[0];\r\n    if (!isIntersecting) return;\r\n    if(!inputRef.value) return;\r\n    loadMoreNotif(); \r\n    image.loadMore();;\r\n}, 300);\r\n\r\nconst observer = new IntersectionObserver(observerHandler, options);\r\nobserver.observe(observerRef);\r\n\r\nfunction requestImage(){\r\n    currentInputValue = inputRef.value;\r\n    if(!inputRef.value) {\r\n        emptyNotif();\r\n        return image.pageReset();\r\n    }\r\n    if(inputRef.value !== image.searchKey){\r\n        image.pageReset();\r\n        currentInputValue = inputRef.value;\r\n    }\r\n    image.searchKey = currentInputValue;\r\n    image.loadMore();\r\n}\r\n\r\n\r\n// const { loadMoreBtnRef, inputRef } = refs;\r\n// loadMoreBtnRef.addEventListener('click', ()=> { loadMoreNotif(); image.loadMore();} );\r\n","import markupRender from \"../insertingMarkup\";\r\nimport imgApi from \"./apiService\";\r\n\r\nconst { insertMarkup, clearMarkup } = markupRender;\r\n\r\nclass ImagePagination{\r\n  searchKey ='';\r\n    constructor(){\r\n        this.imagesArr = [];\r\n        this.searchKey = '';\r\n        this.currentPage = 1;\r\n        this.loadMore = this.loadMore.bind(this);\r\n    }\r\n      get searchKey(){\r\n        return this.searchKey;\r\n      }\r\n      set searchKey(searchKey) {\r\n        if (!searchKey) {\r\n          console.error('image not found!');\r\n        }\r\n        this.searchKey = searchKey;\r\n      }\r\n\r\n      loadMore() {\r\n        this.fetchImages()\r\n        .then((results) => {\r\n          const {hits} = results;\r\n          this.addImages(hits);\r\n          clearMarkup();\r\n          insertMarkup(this.imagesArr);\r\n          this.currentPage += 1;\r\n        });\r\n        // console.log(this.currentPage);\r\n      }\r\n      addImages(newImages) {\r\n        this.imagesArr = [...this.imagesArr, ...newImages];\r\n      }\r\n    fetchImages() {\r\n        return imgApi.fetchImages(this.currentPage, this.searchKey); \r\n    }\r\n    pageReset() {\r\n        this.currentPage = 1;\r\n        this.imagesArr = [];\r\n        clearMarkup();\r\n        // console.log(\"Has been reset\");\r\n    }\r\n}\r\n\r\nexport default ImagePagination;\r\n\r\n"],"sourceRoot":""}